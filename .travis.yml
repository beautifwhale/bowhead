language: node_js

node_js:
  - '12'

script:
  - yarn build:cra-template-bowhead

after_success:
  - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ~/.npmrc  
  - git config user.email "davidmortonmail@gmail.com"
  - git config user.name "TravisCI"
  - git add .
  - git commit -m "chore(*) TravisCI update [skip ci]"
  - git push origin HEAD:master  

deploy:
  - provider: script
    script: yarn release
    skip_cleanup: true
    keep_history: true
    on:
      branch: master