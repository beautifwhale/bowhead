{"version":3,"file":"bowhead.js","sources":["../src/utils/constants.js","../src/components/button-loading-spinner/button-loading-spinner.js","../src/components/button-box/button-box.js","../src/components/page-loading-spinner/page-loading-spinner.js","../src/components/check-email/check-email.js","../src/components/details/details.js","../src/components/billing/billing-styles.js","../src/registry/plugin-registry.js","../src/utils/firebase.js","../src/utils/stripe.js","../src/api/stripe/index.js","../src/components/billing/billing.js","../src/components/account/styles/account-styles.js","../src/components/account/hooks/use-account.js","../src/components/account/account.js","../src/components/authenticated-route/authenticated-route.js","../src/components/sidebar-menu-item/sidebar-menu-item.js","../src/components/cookie-notification/cookie-notification.js","../src/components/pricing/pricing.js","../src/api/firebase/index.js","../src/store/bowheadSlice.js","../src/actions/authActions.js","../src/components/dashboard-nav-bar/dashboard-nav-bar.js","../src/components/dashboard-nav-side-bar/dashboard-nav-side-bar.js","../src/components/nav-bar/nav-bar.js","../src/components/auth-is-loaded/auth-is-loaded.js","../src/pages/dashboard/hooks/use-dashboard.js","../src/pages/dashboard/dashboard.js","../src/pages/sign-in/hooks/use-sign-in.js","../src/pages/sign-in/sign-in-styles.js","../src/pages/sign-in/sign-in.js","../src/pages/verify/verify.js","../src/pages/landing-page/landing-page.js","../src/store/index.js","../src/utils/error-messages.js","../src/bowhead.js"],"sourcesContent":["export const FIRESTORE_COLLECTIONS = {\n  USERS: 'users',\n  STRIPE: 'stripe'\n};\n\nexport const STRIPE_SUBSCRIPTION_STATUS = {\n  TRIALING: 'trialing',\n  ACTIVE: 'active',\n  CANCELLED: 'cancelled'\n}","import React from \"react\";\nimport { Box, CircularProgress } from \"@material-ui/core\";\n\nconst ButtonLoadingSpinner = () => {\n  return (\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" ml={2}>\n      <CircularProgress size={24} />\n    </Box>\n  );\n};\n\nexport default ButtonLoadingSpinner;\n","import React from \"react\";\nimport { Box } from \"@material-ui/core\";\n\nconst ButtonBox = ({ children, ...rest }) => {\n  return (\n    <Box display=\"flex\" alignItems=\"center\" mt={1} {...rest}>\n      {children}\n    </Box>\n  );\n};\n\nexport default ButtonBox;\n","import React from \"react\";\nimport { Box, CircularProgress } from \"@material-ui/core\";\n\nconst PageLoadingSpinner = () => {\n  return (\n    <Box\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      height=\"80vh\"\n    >\n      <CircularProgress />\n    </Box>\n  );\n};\n\nexport default PageLoadingSpinner;\n","import React from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport { EmailOutlined as EmailIcon } from \"@material-ui/icons\";\n\nconst CheckEmail = () => {\n  return (\n    <>\n      <Box align=\"center\">\n        <EmailIcon style={{ fontSize: 100 }} />\n      </Box>\n      <Typography component=\"h1\" variant=\"h1\" gutterBottom align=\"center\">\n        Check your inbox.\n      </Typography>\n      <Typography align=\"center\">\n        We just emailed a confirmation link to you.\n      </Typography>\n      <Typography align=\"center\">\n        Clicking the link will sign you in.\n      </Typography>\n    </>\n  );\n};\n\nexport default CheckEmail;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport { Typography } from \"@material-ui/core\";\n\nconst Details = ({ email, createdAt, lastLoginAt }) => {\n\n  return (\n    <>\n      <Typography component=\"h2\" variant=\"h6\">\n        Email\n      </Typography>\n      <Typography>{email}</Typography>\n\n      <Typography component=\"h2\" variant=\"h6\">\n        Cake Day\n      </Typography>\n      <Typography>{moment(createdAt, \"x\").format(\"LL\")}</Typography>\n\n      <Typography component=\"h2\" variant=\"h6\">\n        Last Login\n      </Typography>\n      <Typography>{moment(lastLoginAt, \"x\").format(\"LLLL\")}</Typography>\n    </>\n  );\n};\n\nconst mapStateToProps = state => {\n  const {\n    firebase: {\n      auth: { email, createdAt, lastLoginAt },\n    },\n  } = state;\n\n\n  return {\n    email, createdAt, lastLoginAt\n  };\n};\n\nexport default connect(mapStateToProps)(Details);\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  button: {\n    marginRight: theme.spacing(1),\n  },\n  subscriptionStatus: {\n    textTransform: 'capitalize'\n  }\n}));\n","const PLUGIN_TYPES = {\n    ROUTE_UNAUTHENTICATED: 'plugin-type-route-unauthenticated',\n    ROUTE_AUTHENTICATED: 'plugin-type-route-authenticated',\n    LINK_POPOVER: 'plugin-type-link-popover',\n    LINK_SIDEBAR: 'plugin-type-link-sidebar',\n    LINK_LANDING_PAGE_NAV: 'plugin-type-link-landing-page',\n    REDUCER: 'plugin-type-reducer',\n    THEME: 'plugin-type-theme',\n    LISTENER_FIRESTORE: 'plugin-type-listener-firestore',\n    CONFIGURATION_BOWHEAD: 'plugin-type-configuration-bowhead'\n};\n\nclass PluginRegistry {\n    constructor() {\n        this.plugins = {};\n        this.listeners = [];\n    }\n\n    getPluginsByType(type) {\n        return Object.values(this.plugins).filter(plugin => plugin.type === type);\n    }\n\n    register(name, plugin) {\n        if (!name || !plugin) {\n            console.error(`All plugins must have a unique name and plugin configuration. Name: ${name}`, plugin)\n            return;\n        }\n        if (!plugin.type || !Object.values(PLUGIN_TYPES).includes(plugin.type)) {\n            console.error(`Plugin configurations must be one of pluginRegistry.PLUGIN_TYPES. Name: ${name}`, plugin)\n            return;\n        }\n        this.plugins[`${plugin.type}-${name}`] = plugin;\n        if (this.listeners.length > 0) {\n            const plugins = Object.values(this.plugins)\n            this.listeners.forEach(listener => listener(plugins))\n        }\n    }\n\n    setChangeListener(listener) {\n        this.listeners.push(listener);\n    }\n\n    removeChangeListener(listener) {\n        const index = this.listeners.indexOf(listener);\n        if (index > -1) {\n            this.listeners.splice(index, 1);\n        }\n    }\n}\n\nconst pluginRegistry = new PluginRegistry();\n\nexport { PLUGIN_TYPES, pluginRegistry };","import { pluginRegistry, PLUGIN_TYPES } from \"../registry/plugin-registry\"\n\nconst getFirebase = () => {\n  const firebase = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.firebase\n  return firebase\n}\n\nconst getFirestore = () => {\n  const firestore = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.firestore\n  return firestore;\n}\n\nconst getToken = () => {\n  const firebase = getFirebase();\n  return firebase.auth().currentUser.getIdToken();\n}\n\nexport { getFirebase, getToken, getFirestore };\n","import { FIRESTORE_COLLECTIONS } from \"./constants\";\nimport { getFirestore, getFirebase } from './firebase'\nimport { loadStripe } from '@stripe/stripe-js';\n\nconst stripe = loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\n\nconst getStripe = () => {\n    return stripe\n}\n\nconst getStipeCustomerId = async () => {\n    const uid = getFirebase().auth().currentUser.uid\n\n    const userDataRef = getFirestore()\n        .collection(FIRESTORE_COLLECTIONS.USERS)\n        .doc(uid);\n\n    const userDataDoc = await userDataRef.get();\n    const userData = userDataDoc.data();\n    return userData.stripeCustomerId\n}\n\nexport { getStripe, getStipeCustomerId };","import { getToken } from '../../utils/firebase'\nimport { pluginRegistry, PLUGIN_TYPES } from '../../registry/plugin-registry';\nimport { getStipeCustomerId } from '../../utils/stripe'\n\nconst deleteStripeCustomer = async () => {\n\n    const api = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.api\n\n    if (!api || !api.deleteStripeCustomer) {\n        console.error(`deleteStripeCustomer API does not exist in bowhead configuration. Plugin: ${PLUGIN_TYPES.CONFIGURATION_BOWHEAD}`)\n    }\n\n    const token = await getToken();\n    const stripeCustomerId = await getStipeCustomerId();\n    return fetch(`${api.deleteStripeCustomer}?token=${token}`, {\n        method: 'POST',\n        body: JSON.stringify({ stripeCustomerId })\n    })\n}\n\nconst createStripeCustomerPortalSession = async () => {\n    const api = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.api\n\n    if (!api || !api.createStripeCustomerPortalSession) {\n        console.error(`createStripeCustomerPortalSession API does not exist in bowhead configuration.Plugin: ${PLUGIN_TYPES.CONFIGURATION_BOWHEAD}`)\n    }\n\n    const token = await getToken();\n    const stripeCustomerId = await getStipeCustomerId();\n    return fetch(`${api.createStripeCustomerPortalSession}?token=${token}`, {\n        method: 'POST',\n        body: JSON.stringify({ customer: stripeCustomerId })\n    }).then(response => response.json())\n}\n\nconst createStripeCheckoutSession = async ({\n    priceId,\n    successUrl,\n    cancelUrl,\n    email,\n    uid\n}) => {\n    const api = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.api\n\n    if (!api || !api.createStripeCheckoutSession) {\n        console.error(`createStripeCheckoutSession API does not exist in bowhead configuration.Plugin: ${PLUGIN_TYPES.CONFIGURATION_BOWHEAD}`)\n        return;\n    }\n\n    const token = await getToken();\n    const stripeCustomerId = await getStipeCustomerId();\n    return fetch(`${api.createStripeCheckoutSession}?token=${token}`, {\n        method: 'POST',\n        body: JSON.stringify({\n            ...(stripeCustomerId && { customer: stripeCustomerId }),\n            payment_method_types: ['card'],\n            line_items: [\n                { price: priceId, quantity: 1 }\n            ],\n            mode: 'subscription',\n            success_url: successUrl,\n            cancel_url: cancelUrl,\n            ...(!stripeCustomerId && { customer_email: email }),\n            client_reference_id: uid,\n            subscription_data: {\n                trial_period_days: '14'\n            }\n        })\n    }).then(response => response.json())\n}\n\nexport {\n    deleteStripeCustomer,\n    createStripeCustomerPortalSession,\n    createStripeCheckoutSession\n}","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Typography, Button, Paper } from \"@material-ui/core\";\nimport { useStyles } from './billing-styles'\nimport { ButtonBox } from \"../button-box\";\nimport { ButtonLoadingSpinner } from \"../button-loading-spinner\";\nimport { useHistory } from 'react-router-dom'\nimport { STRIPE_SUBSCRIPTION_STATUS } from \"../../utils/constants\";\nimport { createStripeCustomerPortalSession } from '../../api/stripe'\nimport { pluginRegistry, PLUGIN_TYPES } from '../../registry/plugin-registry'\n\nconst Billing = ({ planTitle, status, isSubscribed }) => {\n  const { paper, button, subscriptionStatus } = useStyles();\n  const history = useHistory();\n\n  const [isRedirectingToStripeCustomerPortal, setIsRedirectingToStripeCustomerPortal] = useState(false)\n\n  // redirect the user to the Stripe customer portal\n  const handleCreateSessionOpenPortal = async () => {\n    setIsRedirectingToStripeCustomerPortal(true)\n\n    const data = await createStripeCustomerPortalSession()\n      .catch(() => {\n        setIsRedirectingToStripeCustomerPortal(false)\n      })\n\n    // redirect use to stripe portal\n    const url = data.url || null\n    if (url) {\n      window.location.replace(url)\n    } else {\n      // something went wrong to let the user try again\n      setIsRedirectingToStripeCustomerPortal(false)\n    }\n  }\n\n  return (\n    <Paper className={paper} variant=\"outlined\">\n      <Typography component=\"h2\" variant=\"h6\">\n        Subscription\n      </Typography>\n\n      <Typography>{planTitle || 'Not subscribed to any plan yet.'}</Typography>\n\n      {status && <>\n        <Typography component=\"h2\" variant=\"h6\">\n          Status\n        </Typography>\n\n        <Typography className={subscriptionStatus}>{status}</Typography>\n      </>}\n\n      < ButtonBox >\n        {\n          isSubscribed ?\n            <>\n              < Button color=\"primary\" variant=\"contained\" className={button}\n                onClick={() => handleCreateSessionOpenPortal()}\n                disabled={isRedirectingToStripeCustomerPortal}\n              >\n                Manage subscription\n            </Button>\n              {isRedirectingToStripeCustomerPortal && <ButtonLoadingSpinner />}\n            </>\n            :\n            <Button color=\"primary\" variant=\"contained\" className={button}\n              onClick={() => history.push('/dashboard')}\n              disabled={isRedirectingToStripeCustomerPortal}\n            >\n              Subscribe now\n          </Button>\n        }\n      </ButtonBox >\n    </Paper >\n  );\n};\n\nconst mapStateToProps = (state) => {\n  const {\n    firebase: {\n      profile: { stripeCustomerId },\n    },\n    firestore: {\n      data: {\n        stripe\n      }\n    }\n  } = state;\n\n  const stripeData = stripe && stripe[stripeCustomerId];\n  const planId = stripeData?.planId\n  const status = stripeData?.status\n  const isSubscribed = stripeData?.status === STRIPE_SUBSCRIPTION_STATUS.TRIALING ||\n    stripeData?.status === STRIPE_SUBSCRIPTION_STATUS.ACTIVE;\n\n  const plans = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.plans\n\n  let planTitle = plans.filter(plan => plan.priceId === planId)[0]?.title\n\n  return {\n    planTitle,\n    status,\n    isSubscribed\n  };\n};\n\nexport default connect(mapStateToProps)(Billing);\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n}));\n","import { useSelector } from \"react-redux\";\nimport { FIRESTORE_COLLECTIONS } from \"../../../utils/constants\"\n\nconst useAccount = () => {\n  const state = useSelector((state) => state);\n  const {\n    firebase: {\n      profile: { stripeCustomerId },\n    },\n    firestore: {\n      status: { requested },\n    },\n  } = state;\n\n  const isRequestedStripeCustomer = requested[`${FIRESTORE_COLLECTIONS.STRIPE}/${stripeCustomerId}`];\n  const isLoading = isRequestedStripeCustomer &&\n    !(isRequestedStripeCustomer === true)\n\n  return { isLoading };\n};\n\nexport default useAccount;\n","import React from \"react\";\nimport { Paper } from \"@material-ui/core\";\nimport { Details } from \"../details\";\nimport { Billing } from \"../billing\";\nimport { PageLoadingSpinner } from \"../page-loading-spinner\";\nimport { useStyles } from \"./styles\";\nimport { useAccount } from \"./hooks\";\n\nconst Account = () => {\n  const { paper } = useStyles();\n  const { isLoading } = useAccount();\n\n  return isLoading ? (\n    <PageLoadingSpinner />\n  ) : (\n      <>\n        <Paper className={paper} variant=\"outlined\">\n          <Details />\n        </Paper>\n        <Billing />\n      </>\n    );\n};\n\nexport default Account;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect, Route } from \"react-router-dom\";\n\nconst AuthenticatedRoute = ({ isAuthenticated, ...rest }) => {\n  if (!isAuthenticated) {\n    return <Redirect to=\"/signin\" />\n  }\n\n  return <Route {...rest} />;\n};\n\nconst mapStateToProps = state => {\n  const {\n    firebase: { auth: { uid } },\n  } = state;\n\n  const isAuthenticated = !!uid\n\n  return {\n    isAuthenticated\n  };\n};\n\nexport default connect(mapStateToProps)(AuthenticatedRoute);\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Collapse,\n} from \"@material-ui/core\";\n\nimport {\n  ExpandMore as IconExpandMore,\n  ExpandLess as IconExpandLess,\n} from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme) => ({\n  listItem: {\n    color: theme.palette.text.primary,\n  },\n  listItemIcon: {\n    minWidth: theme.spacing(4),\n  },\n}));\n\nconst SidebarMenuItem = (props) => {\n  const {\n    text,\n    path,\n    menuIcon,\n    items = [],\n    onClick,\n    handleDrawerToggle,\n    setActiveMenuItem,\n    activeMenuItem,\n    isDefaultOpen\n  } = props;\n  const classes = useStyles();\n  const isExpandable = items && items.length > 0;\n  const [open, setOpen] = React.useState(isDefaultOpen);\n\n  function handleClick() {\n    if (!isExpandable) {\n      handleDrawerToggle();\n      setActiveMenuItem(text);\n      onClick && onClick()\n    } else {\n      setOpen(!open);\n    }\n  }\n\n  const Icon = menuIcon && menuIcon;\n\n  const MenuItemRoot = (\n    <>\n      <ListItem\n        key={path}\n        button\n        component={path ? NavLink : null}\n        to={!isExpandable && path ? `/dashboard${path}` : '#'}\n        className={classes.listItem}\n        style={{\n          backgroundColor: activeMenuItem === text && \"rgba(0, 0, 0, 0.04)\",\n        }}\n        underline=\"none\"\n        onClick={handleClick}\n      >\n        <ListItemIcon className={classes.listItemIcon}>\n          {Icon ? <Icon /> : null}\n        </ListItemIcon>\n        <ListItemText>{text}</ListItemText>\n        {/* Display the expand menu if the item has children */}\n        {isExpandable && !open && <IconExpandMore />}\n        {isExpandable && open && <IconExpandLess />}\n      </ListItem>\n    </>\n  );\n\n  const MenuItemChildren = isExpandable ? (\n    <Collapse in={open} timeout=\"auto\" unmountOnExit>\n      <List component=\"div\" disablePadding>\n        {items.map((item, index) => (\n          <SidebarMenuItem {...item}\n            key={index}\n            activeMenuItem={activeMenuItem}\n            setActiveMenuItem={setActiveMenuItem}\n            handleDrawerToggle={handleDrawerToggle}\n          />\n        ))}\n      </List>\n    </Collapse>\n  ) : null;\n\n  return (\n    <>\n      {MenuItemRoot}\n      {MenuItemChildren}\n    </>\n  );\n};\n\nexport default SidebarMenuItem;\n","import React from \"react\";\nimport { Button, Snackbar } from \"@material-ui/core\";\nimport { useCookies } from \"react-cookie\";\n\nconst CookieNotification = () => {\n  const [cookies, setCookie] = useCookies([\"cookie_consent\"]);\n  const { cookie_consent } = cookies;\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: \"bottom\",\n        horizontal: \"center\",\n      }}\n      open={!cookie_consent}\n      message=\"We use cookies to give you the best experience on our website. If you continue to use this site we will assume that you are happy with it.\"\n      action={\n        <Button\n          color=\"primary\"\n          variant=\"contained\"\n          size=\"small\"\n          onClick={() => setCookie(\"cookie_consent\", true)}\n        >\n          Hide\n        </Button>\n      }\n    />\n  );\n};\n\nexport default CookieNotification;\n","import React, { useState } from \"react\";\nimport {\n    Button,\n    Card,\n    CardContent,\n    CardHeader,\n    Grid,\n    Typography\n} from \"@material-ui/core\";\nimport { Star as StarBorder } from \"@material-ui/icons\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { getStripe } from '../../utils/stripe'\nimport { createStripeCheckoutSession } from '../../api/stripe'\nimport { connect } from \"react-redux\";\nimport { pluginRegistry, PLUGIN_TYPES } from '../../registry/plugin-registry'\n\nconst useStyles = makeStyles((theme) => ({\n    section: {\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        '& .MuiCardContent-root > ul': {\n            margin: 0,\n            padding: 0,\n            listStyle: \"none\",\n        }\n    },\n    cardPricing: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"baseline\",\n        marginBottom: theme.spacing(2),\n    }\n}));\n\nconst Pricing = ({ uid, email }) => {\n    const classes = useStyles();\n\n    const [isRedirecting, setIsRedirecting] = useState(false)\n\n    const app = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.app\n\n    const dashboardUrl =\n        process.env.NODE_ENV === \"development\"\n            ? `http://localhost:8888/dashboard`\n            : `${app.productionUrl}/dashboard`;\n\n    const handleRedirectToStripe = async (priceId) => {\n        setIsRedirecting(true)\n        const data = await createStripeCheckoutSession({\n            priceId,\n            successUrl: dashboardUrl,\n            cancelUrl: dashboardUrl,\n            email,\n            uid\n        }).catch(() => {\n            setIsRedirecting(false)\n        })\n\n\n        if (data && data.id) {\n            const stripe = await getStripe();\n            stripe.redirectToCheckout({\n                sessionId: data.id\n            }).catch(error => {\n                console.log(error)\n            });\n        } else {\n            setIsRedirecting(false)\n        }\n\n    };\n\n    const plans = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.plans\n\n    return (\n        <Grid\n            container\n            component=\"section\"\n            className={classes.section}\n            alignItems=\"flex-end\"\n            spacing={6}\n        >\n            {\n                // only use the first 3 entires in the plans array\n                plans.slice(0, 3).map((tier, index) => (\n                    // Enterprise card is full width at sm breakpoint\n                    <Grid\n                        item\n                        key={tier.title}\n                        xs={12}\n                        sm={tier.title === \"Enterprise\" ? 12 : 6}\n                        md={4}\n                    >\n                        <Card>\n                            <CardHeader\n                                title={tier.title}\n                                subheader={tier.subheader}\n                                titleTypographyProps={{ align: \"center\" }}\n                                subheaderTypographyProps={{ align: \"center\" }}\n                                action={tier.title === \"Pro\" ? <StarBorder /> : null}\n                            />\n                            <CardContent>\n                                <div className={classes.cardPricing}>\n                                    <Typography component=\"h2\" variant=\"h2\">\n                                        €{tier.price}\n                                    </Typography>\n                                    <Typography>/ month</Typography>\n                                </div>\n                                <div className={classes.cardPricing}>\n                                    <Button\n                                        onClick={() => handleRedirectToStripe(tier.priceId)}\n                                        variant={index % 2 ? \"contained\" : \"outlined\"}\n                                        color=\"primary\"\n                                        disabled={isRedirecting}\n                                    >\n                                        Get started\n                                    </Button>\n                                </div>\n                                <ul>\n                                    {tier.featureList.map((line) => (\n                                        <Typography component=\"li\" align=\"center\" key={line}>\n                                            {line}\n                                        </Typography>\n                                    ))}\n                                </ul>\n                            </CardContent>\n                        </Card>\n                    </Grid>\n                ))\n            }\n        </Grid >)\n\n}\n\nconst mapStateToProps = (state) => {\n    const {\n        firebase: { auth: { uid, email } }\n    } = state;\n\n    return {\n        uid,\n        email\n    };\n};\n\nexport default connect(mapStateToProps)(Pricing);","import { pluginRegistry, PLUGIN_TYPES } from '../../registry/plugin-registry'\nimport { FIRESTORE_COLLECTIONS } from \"../../utils/constants\";\nimport { getFirestore, getFirebase } from '../../utils/firebase'\nimport { getStipeCustomerId } from '../../utils/stripe'\n\nexport const signOut = () => {\n    return getFirebase()\n        .auth()\n        .signOut()\n}\n\n/**\n * Sends sign in email and appends ref and data to URL.\n * \n * @param {*} args.email users email address\n * @param {*} args.ref reference for email authentication\n * @param {*} args.data object with key/value pairs for URL params \n */\nexport const sendSignInEmail = ({ email, data }) => {\n\n    const app = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.app\n\n    const urlStr = process.env.NODE_ENV === \"development\"\n        ? `http://localhost:8888/verify`\n        : `${app.productionUrl}/verify`;\n\n    const url = new URL(urlStr);\n\n    data && Object.keys(data).forEach(key => {\n        url.searchParams.append(key, data[key]);\n    });\n\n    return getFirebase()\n        .auth()\n        .sendSignInLinkToEmail(email, {\n            url: url.href,\n            handleCodeInApp: true\n        })\n}\n\nexport const signInWithEmailLink = ({ email, location }) => {\n    return getFirebase().auth().signInWithEmailLink(email, location)\n}\n\nexport const isSignInWithEmailLink = ({ location }) => {\n    return getFirebase().auth().isSignInWithEmailLink(location)\n}\n\n\nexport const verifyUserSignInUpdate = ({ uid, email }) => {\n    return getFirestore()\n        .collection(FIRESTORE_COLLECTIONS.USERS)\n        .doc(uid)\n        .set({\n            email,\n        },\n            { merge: true }\n        );\n}\n\nexport const updateUserProfile = async (data) => {\n\n    const uid = getFirebase().auth().currentUser.uid\n    return getFirestore()\n        .collection(FIRESTORE_COLLECTIONS.USERS)\n        .doc(uid)\n        .set(data,\n            { merge: true }\n        );\n}\n\nexport const deleteUserProfile = async () => {\n\n    const uid = getFirebase().auth().currentUser.uid\n    const userDataRef = getFirestore()\n        .collection(FIRESTORE_COLLECTIONS.USERS)\n        .doc(uid);\n\n    const stripeCustomerId = await getStipeCustomerId()\n\n    const batch = getFirestore().batch();\n\n    if (stripeCustomerId) {\n        // delete stripe customer data\n        const stripeCustomerDataRef = getFirestore()\n            .collection(FIRESTORE_COLLECTIONS.STRIPE)\n            .doc(stripeCustomerId);\n        batch.delete(stripeCustomerDataRef)\n    }\n\n    // user data\n    batch.delete(userDataRef)\n    return batch.commit()\n};\n","import { createSlice } from '@reduxjs/toolkit'\n\nconst bowheadSlice = createSlice({\n  name: 'bowhead',\n  initialState: {},\n  reducers: {\n    sendEmailLink(state) {\n      return {\n        ...state,\n        isSendingEmailLink: true,\n        isEmailLinkSent: false,\n        sendEmailAuthError: null\n      };\n    },\n    sendEmailLinkSuccess(state) {\n      return {\n        ...state,\n        isSendingEmailLink: false,\n        isEmailLinkSent: true,\n        sendEmailAuthError: null\n      };\n    },\n    sendEmailLinkError(state, action) {\n      return {\n        ...state,\n        isSendingEmailLink: false,\n        isEmailLinkSent: false,\n        sendEmailAuthError: action.error\n      }\n    },\n    sendEmailLinkReset(state) {\n      return {\n        ...state,\n        isSendingEmailLink: false,\n        isEmailLinkSent: false,\n        sendEmailAuthError: null\n      }\n    },\n    signOut(state) {\n      return {\n        ...state,\n        isSigningOut: true,\n        signOutError: null\n      };\n    },\n    signOutSuccess(state) {\n      return {\n        ...state,\n        isSigningOut: false,\n        signOutError: null\n      };\n    },\n    signOutError(state, action) {\n      return {\n        ...state,\n        isSigningOut: false,\n        signOutError: action.error\n      };\n    },\n    verifyUser(state) {\n      return {\n        ...state,\n        isVerifyingUser: true,\n        isVerifyingUserError: null,\n        isVerified: false\n      };\n    },\n    verifyUserSuccess(state) {\n      return {\n        ...state,\n        isVerifyingUser: false,\n        isVerifyingUserError: null,\n        isVerified: true\n      };\n    },\n    verifyUserError(state, action) {\n      return {\n        ...state,\n        isVerifyingUser: false,\n        isVerifyingUserError: action.error,\n        isVerified: false\n      };\n    },\n  }\n})\n\nexport const {\n  sendEmailLink,\n  sendEmailLinkSuccess,\n  sendEmailLinkError,\n  sendEmailLinkReset,\n  signOut,\n  signOutSuccess,\n  signOutError,\n  verifyUser,\n  verifyUserSuccess,\n  verifyUserError\n} = bowheadSlice.actions\n\n\nexport default bowheadSlice.reducer","import * as firebase from '../api/firebase'\nimport * as bowheadSlice from '../store/bowheadSlice'\nimport { isSignInWithEmailLink, signInWithEmailLink, verifyUserSignInUpdate } from '../api/firebase'\n\nexport const resetSendEmailLink = () => {\n  return dispatch => {\n    dispatch(bowheadSlice.sendEmailLinkReset());\n  };\n};\n\nexport const signOut = () => {\n  return async (dispatch) => {\n    dispatch(bowheadSlice.signOut());\n\n    await firebase.signOut()\n      .then(() => {\n        dispatch(bowheadSlice.signOutSuccess());\n      })\n      .catch(error => {\n        dispatch(bowheadSlice.signOutError(error));\n      });\n  };\n};\n\nexport const sendSignInEmailLink = ({ email, data }) => {\n  return async (dispatch) => {\n    dispatch(bowheadSlice.sendEmailLink());\n\n    await firebase.sendSignInEmail({ email, data })\n      .then(() => {\n        window.localStorage.setItem(\"emailForSignIn\", email);\n      })\n      .then(() => {\n        dispatch(bowheadSlice.sendEmailLinkSuccess());\n      })\n      .catch(error => {\n        dispatch(bowheadSlice.sendEmailLinkError(error));\n      });\n  };\n};\n\n\nexport const verifyUser = () => {\n  return async (dispatch) => {\n    dispatch(bowheadSlice.verifyUser());\n\n    if (isSignInWithEmailLink({ location: window.location.href })) {\n      var email = window.localStorage.getItem(\"emailForSignIn\");\n      window.localStorage.removeItem(\"emailForSignIn\");\n      if (!email) {\n        // User opened the link on a different device. To prevent session fixation\n        // attacks, ask the user to provide the associated email again. For example:\n        email = window.prompt(\"Please provide your email for confirmation\");\n      }\n\n      await signInWithEmailLink({ email, location: window.location.href })\n        .then(async result => {\n          const uid = result.user.uid;\n\n          await verifyUserSignInUpdate({ uid, email })\n            .then(() => {\n              dispatch(bowheadSlice.verifyUserSuccess());\n            })\n            .catch(error => {\n              dispatch(bowheadSlice.verifyUserError(error));\n            });\n        })\n        .catch(error => {\n          dispatch(bowheadSlice.verifyUserError(error));\n        });\n    }\n  };\n};\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { NavLink } from \"react-router-dom\";\nimport { signOut } from \"../../actions/authActions\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  Toolbar,\n  Link,\n  Avatar,\n  MenuItem,\n  Menu,\n  IconButton,\n  ListItemText,\n  Hidden,\n  ListItemIcon,\n} from \"@material-ui/core\";\nimport {\n  Menu as MenuIcon,\n  ExitToApp as ExitToAppIcon,\n  Timeline as TimelineIcon,\n  AccountCircle as AccountIcon\n} from \"@material-ui/icons\";\nimport { CookieNotification } from \"../cookie-notification\";\nimport { pluginRegistry, PLUGIN_TYPES } from \"../../registry/plugin-registry\";\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  title: {\n    color: theme.palette.text.primary,\n    fontWeight: 400,\n    fontSize: \"18px\",\n  },\n  navigation: {\n    marginLeft: \"auto\",\n  },\n  listItemIcon: {\n    minWidth: theme.spacing(4),\n  },\n  icon: {\n    verticalAlign: \"text-top\",\n    [theme.breakpoints.down(\"xs\")]: {\n      display: \"none\",\n    },\n  },\n}));\n\nconst DashboardNavBar = ({ signOut, handleDrawerToggle }) => {\n  const classes = useStyles();\n\n  // dropdown settings menu\n  const [anchorEl, setAnchorEl] = useState(null);\n  const isMenuOpen = Boolean(anchorEl);\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const menuItemPlugins = pluginRegistry.getPluginsByType(PLUGIN_TYPES.LINK_POPOVER)\n\n  menuItemPlugins.unshift({\n    path: \"/account\",\n    menuIcon: AccountIcon,\n    text: 'Account'\n  })\n\n  const menuItems = (config) => {\n\n    return config && config.map((item, index) => {\n      if (!item) return null;\n\n      const path = item?.path;\n      const onClick = item?.onClick;\n      const Icon = item?.menuIcon;\n      const text = item?.text;\n      return (\n        <MenuItem\n          key={index}\n          component={NavLink}\n          to={`/dashboard${path}`}\n          onClick={onClick}\n          color=\"textPrimary\"\n          underline=\"none\"\n        >\n          <ListItemIcon className={classes.listItemIcon}>\n            {Icon && <Icon /> || null}\n          </ListItemIcon>\n          <ListItemText>{text}</ListItemText>\n        </MenuItem>\n      )\n    })\n  }\n\n  const app = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.app\n  const name = app?.name || 'Default name';\n\n  return (\n    <>\n      <CookieNotification />\n      <AppBar\n        className={classes.appBar}\n        color=\"inherit\"\n      >\n        <Toolbar>\n          <Hidden mdUp>\n            {/* burger menu for sidebar */}\n            <IconButton edge=\"start\" onClick={handleDrawerToggle}>\n              <MenuIcon />\n            </IconButton>\n          </Hidden>\n\n          <Link\n            component={NavLink}\n            to=\"/dashboard\"\n            onClick={() => window.scrollTo(0, 0)}\n            className={classes.title}\n            underline=\"none\"\n          >\n            <TimelineIcon className={classes.icon} /> {name}\n          </Link>\n\n          <nav className={classes.navigation}>\n            {/* popover triggered when avatar image clicked */}\n            <Avatar className={classes.avatar} onClick={handleMenuOpen} />\n\n            {/* popover position https://material-ui.com/components/popover/#anchor-playground */}\n            <Menu\n              anchorEl={anchorEl}\n              anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n              id=\"appbar-menu\"\n              keepMounted\n              transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n              open={isMenuOpen}\n              onClose={handleMenuClose}\n              getContentAnchorEl={null}\n              MenuListProps={{ disablePadding: true }}\n            >\n              <div\n                role=\"presentation\"\n                onClick={handleMenuClose}\n                onKeyDown={handleMenuClose}\n              >\n                {menuItems(menuItemPlugins)}\n                <MenuItem\n                  component={NavLink}\n                  to=\"/signin\"\n                  onClick={signOut}\n                  color=\"textPrimary\"\n                  underline=\"none\"\n                >\n                  <ListItemIcon className={classes.listItemIcon}>\n                    <ExitToAppIcon />\n                  </ListItemIcon>\n                  <ListItemText>Sign out</ListItemText>\n                </MenuItem>\n              </div>\n            </Menu>\n          </nav>\n        </Toolbar>\n      </AppBar>\n\n\n    </>\n  );\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signOut: () => dispatch(signOut()),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(DashboardNavBar);\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Hidden, Drawer } from \"@material-ui/core\";\nimport {\n  Dashboard as DashboardIcon,\n} from \"@material-ui/icons\";\nimport { SidebarMenuItem } from \"../sidebar-menu-item\";\nimport { pluginRegistry, PLUGIN_TYPES } from '../../registry/plugin-registry'\n\n// sidebar\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n    backgroundColor: theme.palette.background.default,\n    '& .MuiCollapse-entered': {\n      overflow: 'auto'\n    },\n  }\n}));\n\nconst DashboardNavSidebar = ({\n  handleDrawerToggle,\n  mobileOpen\n}) => {\n  const classes = useStyles();\n\n  // currently selected menu item \n  const [activeMenuItem, setActiveMenuItem] = useState('')\n\n  const sidebarMenuItems = pluginRegistry.getPluginsByType(PLUGIN_TYPES.LINK_SIDEBAR)\n\n  sidebarMenuItems.unshift({\n    type: PLUGIN_TYPES.LINK_SIDEBAR,\n    menuIcon: DashboardIcon,\n    text: \"Dashboard\",\n    path: \"/\",\n  })\n\n  const drawer = () => {\n    return sidebarMenuItems.map(\n      (menuItem, index) =>\n        menuItem && <SidebarMenuItem\n          key={index}\n          {...menuItem}\n          activeMenuItem={activeMenuItem}\n          setActiveMenuItem={setActiveMenuItem}\n          handleDrawerToggle={handleDrawerToggle}\n        />\n    );\n  };\n\n  return (\n    <>\n      <Hidden mdUp>\n        <Drawer\n          variant=\"temporary\"\n          anchor=\"left\"\n          open={mobileOpen}\n          onClose={handleDrawerToggle}\n          classes={{\n            paper: classes.drawerPaper\n          }}\n          ModalProps={{\n            keepMounted: true, // Better open performance on mobile.\n          }}\n        >\n          {drawer()}\n        </Drawer>\n      </Hidden>\n      <Hidden smDown>\n        <Drawer\n          classes={{\n            paper: classes.drawerPaper\n          }}\n          variant=\"permanent\"\n          open\n        >\n          <div className={classes.toolbar} />\n          {drawer()}\n        </Drawer>\n      </Hidden>\n    </>\n  );\n};\n\n\nexport default DashboardNavSidebar;\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { NavLink } from \"react-router-dom\";\nimport { signOut } from \"../../actions/authActions\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  Button,\n  Toolbar,\n  IconButton,\n  ListItem,\n  SwipeableDrawer,\n  Link,\n  Hidden,\n  List,\n} from \"@material-ui/core\";\nimport { Menu as MenuIcon, Timeline as TimelineIcon } from \"@material-ui/icons\";\nimport { CookieNotification } from \"../cookie-notification\";\nimport { pluginRegistry, PLUGIN_TYPES } from \"../../registry/plugin-registry\";\n\nconst useStyles = makeStyles((theme) => ({\n  toolbar: {\n    [theme.breakpoints.down(\"xs\")]: {\n      flexDirection: \"row-reverse\",\n    },\n  },\n  title: {\n    flexGrow: 1,\n    fontWeight: 400,\n    fontSize: \"18px\",\n  },\n  link: {\n    color: theme.palette.text.primary,\n    marginRight: theme.spacing(2),\n  },\n  icon: {\n    verticalAlign: \"text-top\",\n    [theme.breakpoints.down(\"xs\")]: {\n      display: \"none\",\n    },\n  },\n}));\n\n\nconst NavBar = ({ uid, signOut }) => {\n  const classes = useStyles();\n\n  // side drawer on landing page\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const handleDrawerToggle = () => {\n    setDrawerOpen(!drawerOpen);\n  };\n\n  const app = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.app\n  const name = app?.name || 'Default name';\n\n  const linksConfig = pluginRegistry.getPluginsByType(PLUGIN_TYPES.LINK_LANDING_PAGE_NAV)\n\n  const getLinks = (config) => {\n    return config.map((link, index) => (\n      <Link\n        key={index}\n        href={`${link.path}`} className={classes.link}>\n        {link.labelText}\n      </Link>\n    ))\n  }\n\n  const landingPageLinks = linksConfig && linksConfig.length > 0 && getLinks(linksConfig);\n\n  return (\n    <>\n      <CookieNotification />\n      <AppBar color=\"inherit\">\n        <Toolbar className={classes.toolbar}>\n          <Hidden smUp>\n            {uid ? (\n              <>\n                <Button\n                  component={NavLink}\n                  to=\"/dashboard\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  size=\"small\"\n                >\n                  Dashboard\n                </Button>\n                <Link\n                  component={NavLink}\n                  to=\"/signin\"\n                  onClick={signOut}\n                  className={classes.link}\n                >\n                  Sign out\n                </Link>\n              </>\n            ) : (\n              <>\n                <Button\n                  component={NavLink}\n                  to=\"/signin\"\n                  color=\"primary\"\n                  variant=\"contained\"\n                  size=\"small\"\n                >\n                  Get Started\n                  </Button>\n\n                <Button\n                  component={NavLink}\n                  to=\"/signin\"\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  className={classes.link}\n                  size=\"small\"\n                >\n                  Sign In\n                </Button>\n              </>\n            )}\n          </Hidden>\n\n          <Link\n            component={NavLink}\n            to=\"/\"\n            onClick={() => window.scrollTo(0, 0)}\n            className={`${classes.link} ${classes.title}`}\n            underline=\"none\"\n          >\n            <TimelineIcon className={classes.icon} /> {name}\n          </Link>\n\n\n          <Hidden xsDown>\n            <nav>\n              {uid ? (\n                <>\n                  <Link\n                    component={NavLink}\n                    to=\"/signin\"\n                    onClick={signOut}\n                    className={classes.link}\n                  >\n                    Sign out\n                  </Link>\n                  <Button\n                    component={NavLink}\n                    to=\"/dashboard\"\n                    color=\"primary\"\n                    variant=\"contained\"\n                  >\n                    Dashboard\n                  </Button>\n                </>\n              ) : (\n                <>\n                  {landingPageLinks || null}\n                  <Button\n                    component={NavLink}\n                    to=\"/signin\"\n                    color=\"primary\"\n                    variant=\"outlined\"\n                    className={classes.link}\n                  >\n                    Sign In\n                    </Button>\n                  <Button\n                    component={NavLink}\n                    to=\"/signin\"\n                    color=\"primary\"\n                    variant=\"contained\"\n                  >\n                    Get Started\n                    </Button>\n                </>\n              )}\n            </nav>\n          </Hidden>\n\n          <Hidden smUp>\n            <IconButton onClick={handleDrawerToggle} edge=\"start\">\n              <MenuIcon />\n            </IconButton>\n          </Hidden>\n\n          <SwipeableDrawer\n            open={drawerOpen}\n            onClose={handleDrawerToggle}\n            onOpen={handleDrawerToggle}\n            anchor=\"left\"\n          >\n            <List\n              role=\"presentation\"\n              onClick={handleDrawerToggle}\n              onKeyDown={handleDrawerToggle}\n              disablePadding\n            >\n              {uid ? (\n                <>\n                  <ListItem>\n                    <Button\n                      component={NavLink}\n                      to=\"/dashboard\"\n                      color=\"primary\"\n                      variant=\"contained\"\n                      size=\"small\"\n                    >\n                      Dashboard\n                      </Button>\n                  </ListItem>\n                  <ListItem>\n                    <Link\n                      component={NavLink}\n                      to=\"/signin\"\n                      onClick={signOut}\n                      className={classes.link}\n                    >\n                      Sign out\n                      </Link>\n                  </ListItem>\n                </>\n              ) : (\n                <>\n                  <ListItem>\n                    <Link href=\"#features\" className={classes.link}>\n                      Features\n                      </Link>\n                  </ListItem>\n                  <ListItem>\n                    <Link href=\"#pricing\" className={classes.link}>\n                      Pricing\n                      </Link>\n                  </ListItem>\n                  <ListItem>\n                    <Button\n                      component={NavLink}\n                      to=\"/signin\"\n                      color=\"primary\"\n                      variant=\"outlined\"\n                      className={classes.link}\n                    >\n                      Sign In\n                    </Button>\n                  </ListItem>\n                  <ListItem>\n                    <Button\n                      component={NavLink}\n                      to=\"/signin\"\n                      color=\"primary\"\n                      variant=\"contained\"\n                    >\n                      Get Started\n                    </Button>\n                  </ListItem>\n                </>\n              )}\n            </List>\n          </SwipeableDrawer>\n        </Toolbar>\n      </AppBar>\n    </>\n  );\n};\n\nconst mapStateToProps = ({ firebase: { auth: { uid } } }) => {\n  return {\n    uid,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signOut: () => dispatch(signOut()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavBar);\n","import React from 'react'\nimport { useSelector } from \"react-redux\";\nimport {\n    isLoaded,\n} from \"react-redux-firebase\";\nimport { PageLoadingSpinner } from \"../page-loading-spinner\";\n\nconst AuthIsLoaded = ({ children }) => {\n    const auth = useSelector((state) => state?.firebase?.auth);\n    if (!isLoaded(auth)) return <PageLoadingSpinner />;\n    return children;\n};\n\nexport default AuthIsLoaded;","import { useSelector } from \"react-redux\";\nimport { useState, useEffect } from 'react'\nimport { STRIPE_SUBSCRIPTION_STATUS, FIRESTORE_COLLECTIONS } from \"../../../utils/constants\";\nimport { useFirestoreConnect } from \"react-redux-firebase\";\nimport { pluginRegistry, PLUGIN_TYPES } from \"../../../registry/plugin-registry\";\n\nconst useDashboard = () => {\n  const state = useSelector((state) => state);\n  const {\n    firestore: {\n      status: { requesting },\n      data: { stripe }\n    },\n    firebase: {\n      profile: { stripeCustomerId },\n    }\n  } = state;\n\n  const isLoading = requesting &&\n    (Object.keys(requesting).length === 0 || // if we haven't made a request yet\n      Object.keys(requesting).filter(value => /^stripe/.test(value)).filter(key => requesting[key] === true).length > 0) // if any \n\n  const [listeners, setListeners] = useState([])\n  const subscriptionStatus = stripe && stripe[stripeCustomerId]?.status\n  const isSubscribed = subscriptionStatus === STRIPE_SUBSCRIPTION_STATUS.TRIALING ||\n    subscriptionStatus === STRIPE_SUBSCRIPTION_STATUS.ACTIVE\n\n  useEffect(() => {\n    const listener = (plugins) => {\n      const pluginListeners = plugins.filter(plugin => plugin.type === PLUGIN_TYPES.LISTENER_FIRESTORE)\n      setListeners(pluginListeners)\n    }\n    pluginRegistry.setChangeListener(listener)\n\n    return () => {\n      pluginRegistry.removeChangeListener(listener)\n    }\n  }, [])\n\n  useFirestoreConnect([...listeners, {\n    collection: FIRESTORE_COLLECTIONS.STRIPE,\n    doc: stripeCustomerId,\n  }])\n\n  return {\n    isLoading,\n    isSubscribed\n  };\n};\n\nexport default useDashboard;\n","import React, { useState } from \"react\";\nimport { Switch, Route, Link as RouterLink } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Breadcrumbs, Typography, Link, Container } from \"@material-ui/core\";\nimport { DashboardNavSidebar, DashboardNavBar, Pricing, Account, PageLoadingSpinner } from '../../components'\nimport { useDashboard } from './hooks'\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  sidebar: {\n    flex: 1,\n    [theme.breakpoints.up(\"md\")]: {\n      flexShrink: 0,\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n      maxWidth: \"100%\",\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  breadcrumbs: {\n    margin: theme.spacing(2, 0, 2, 0),\n  },\n}));\n\nconst LinkRouter = (props) => <Link {...props} component={RouterLink} />;\n\nconst createLinkText = (to) => {\n  const capitalize = (s) => {\n    if (typeof s !== 'string') return ''\n    return s.charAt(0).toUpperCase() + s.slice(1)\n  }\n\n  const paths = to?.split(\"/\").filter((x) => x);\n  const end = paths[paths.length - 1];\n  return capitalize(end)\n};\n\n\nconst Dashboard = (props) => {\n  const { match, children } = props;\n\n  const {\n    isLoading,\n    isSubscribed\n  } = useDashboard();\n\n  const classes = useStyles();\n\n  // sidebar\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  if (isLoading) {\n    return <PageLoadingSpinner />\n  }\n\n  return (\n    <>\n      <DashboardNavBar\n        handleDrawerToggle={handleDrawerToggle}\n      />\n      {isSubscribed &&\n        <DashboardNavSidebar\n          handleDrawerToggle={handleDrawerToggle}\n          mobileOpen={mobileOpen}\n        />}\n      <div className={classes.toolbar} />\n\n      <Container component=\"main\"\n        // only add sidebar styling if user is subscribed\n        {...(isSubscribed && { className: classes.sidebar })}\n      >\n        {/* breadcrumbs */}\n        <Route>\n          {({ location }) => {\n            const pathnames = location.pathname.split(\"/\").filter((x) => x);\n\n            return (\n              <Breadcrumbs\n                aria-label=\"breadcrumb\"\n                className={classes.breadcrumbs}\n              >\n                {pathnames.map((value, index) => {\n                  const last = index === pathnames.length - 1;\n                  const to = `/${pathnames.slice(0, index + 1).join(\"/\")}`;\n                  const linkText = createLinkText(to)\n\n                  return last ? (\n                    <Typography color=\"textPrimary\" key={to}>\n                      {linkText}\n                    </Typography>\n                  ) : (\n                      <LinkRouter color=\"inherit\" to={to} key={to}>\n                        {linkText}\n                      </LinkRouter>\n                    );\n                })}\n              </Breadcrumbs>\n            );\n          }}\n        </Route>\n\n        <Switch>\n          {!isSubscribed && <Route exact path={`${match.path}/`} component={Pricing} />}\n          {children}\n          <Route exact path={`${match.path}/account`} component={Account} />\n          <Route component={() => <div>No page found</div>} />\n        </Switch>\n      </Container>\n\n    </>\n  );\n};\n\nexport default Dashboard;\n","import { useSelector, useDispatch } from \"react-redux\";\nimport { sendSignInEmailLink } from \"../../../actions/authActions\";\n\nconst useSignIn = () => {\n  const state = useSelector((state) => state);\n  const dispatch = useDispatch()\n\n  const {\n    bowhead, firebase: { auth: { uid } }\n  } = state;\n\n  const { sendEmailAuthError, isSendingEmailLink, isEmailLinkSent } = bowhead;\n\n  const handleSendSignInEmailLink = ({ email }) => {\n    dispatch(sendSignInEmailLink({ email }))\n  }\n\n  return {\n    sendEmailAuthError,\n    handleSendSignInEmailLink,\n    isSendingEmailLink,\n    isEmailLinkSent,\n    uid,\n  };\n};\n\nexport default useSignIn;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n    section: {\n        margin: theme.spacing(10, 0, 10),\n        justifyContent: \"center\",\n    },\n}));","import React, { useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport {\n  Button,\n  Grid,\n  Container,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { ButtonLoadingSpinner, ButtonBox, CheckEmail } from \"../../components\";\nimport { useSignIn } from './hooks'\nimport { useStyles } from './sign-in-styles'\n\nconst SignIn = () => {\n  const {\n    sendEmailAuthError,\n    handleSendSignInEmailLink,\n    isSendingEmailLink,\n    isEmailLinkSent,\n    uid,\n  } = useSignIn();\n  const [formInput, setFormInput] = useState({});\n\n  const { section } = useStyles();\n\n  if (uid) return <Redirect to=\"/dashboard\" />;\n\n  const handleChange = (id, value) => {\n    setFormInput((currentState) =>\n      Object.assign(currentState, {\n        [id]: value,\n      })\n    );\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const email = formInput?.email;\n    if (!isSendingEmailLink && email) {\n      handleSendSignInEmailLink({ email });\n    }\n  };\n\n  return (\n    <Container component=\"main\">\n      <Grid container component=\"section\" className={section}>\n        <Grid item xs={12} sm={6}>\n          {isEmailLinkSent ? (\n            <CheckEmail />\n          ) : (\n              <form onSubmit={handleSubmit} autoComplete=\"on\">\n                <Typography component=\"h1\" variant=\"h1\" gutterBottom>\n                  Sign In\n              </Typography>\n                <Typography>\n                  Enter the email associated with your account. Clicking the link\n                  we send to your inbox will sign you in.\n              </Typography>\n                <TextField\n                  id=\"email\"\n                  label=\"Email\"\n                  required\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  onChange={({ target: { id, value } }) =>\n                    handleChange(id, value)\n                  }\n                  fullWidth\n                  inputProps={{ maxLength: \"50\" }}\n                  variant=\"outlined\"\n                  margin=\"dense\"\n                />\n\n                <ButtonBox mb={2}>\n                  <Button\n                    type=\"submit\"\n                    color=\"primary\"\n                    variant=\"contained\"\n                    disabled={isSendingEmailLink}\n                  >\n                    Sign In\n                </Button>\n                  {isSendingEmailLink && <ButtonLoadingSpinner />}\n                </ButtonBox>\n\n                {sendEmailAuthError ? (\n                  <Typography color=\"error\">\n                    There was error signing you in. Please try again.\n                  </Typography>\n                ) : null}\n              </form>\n            )}\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\n\nexport default SignIn;\n","import React, { useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { verifyUser } from \"../../actions/authActions\";\nimport { PageLoadingSpinner } from \"../../components\";\n\nconst Verify = ({\n  verifyUser,\n  isLoading\n}) => {\n  useEffect(() => {\n    verifyUser();\n  }, [verifyUser]);\n\n  if (isLoading) {\n    return <Redirect to=\"/dashboard\" />;\n  }\n\n  return <PageLoadingSpinner />;\n};\n\nconst mapStateToProps = (\n  state\n) => {\n  const { firebase: { auth: { uid } }, bowhead: { isVerifyingUser, isVerified }\n  } = state;\n\n  const isLoading = uid && !isVerifyingUser && isVerified;\n  return {\n    isLoading\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    verifyUser: () => dispatch(verifyUser()),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Verify);\n","import React from \"react\";\nimport { NavBar } from \"../../components\";\n\nconst LandingPage = ({ children }) => {\n\n  return (\n    <>\n      <NavBar />\n      {children}\n    </>\n  );\n};\n\nexport default LandingPage;\n","import React from 'react'\nimport { configureStore, getDefaultMiddleware } from \"@reduxjs/toolkit\";\nimport {\n    reduxFirestore,\n    createFirestoreInstance,\n    constants as rfConstants\n} from \"redux-firestore\";\nimport { FIRESTORE_COLLECTIONS } from \"../utils/constants\";\nimport { Provider } from \"react-redux\";\nimport {\n    ReactReduxFirebaseProvider,\n    actionTypes as rrfActionTypes\n} from \"react-redux-firebase\";\nimport { pluginRegistry, PLUGIN_TYPES } from '../registry/plugin-registry'\nimport { combineReducers } from \"redux\";\nimport { firestoreReducer } from \"redux-firestore\";\nimport { firebaseReducer } from \"react-redux-firebase\";\nimport bowheadSlice from '../store/bowheadSlice'\n\nconst getStore = (firebase) => {\n\n    // see: https://redux-toolkit.js.org/usage/usage-guide#use-with-react-redux-firebase\n    const middleware = [\n        ...getDefaultMiddleware({\n            serializableCheck: {\n                ignoredActions: [\n                    // just ignore every redux-firebase and react-redux-firebase action type\n                    ...Object.keys(rfConstants.actionTypes).map(\n                        type => `${rfConstants.actionsPrefix}/${type}`\n                    ),\n                    ...Object.keys(rrfActionTypes).map(\n                        type => `@@reactReduxFirebase/${type}`\n                    ),\n                    'bowhead/deleteUserError'\n                ],\n                ignoredPaths: ['firebase', 'firestore']\n            }\n        })\n    ]\n\n    const getReducers = (plugins) => {\n        const reducers = {}\n        plugins.forEach(plugin => {\n            reducers[plugin.name] = plugin.reducer\n        })\n\n        // bowhead redux slices\n        reducers.bowhead = bowheadSlice\n        reducers.firestore = firestoreReducer\n        reducers.firebase = firebaseReducer\n\n        return reducers\n    }\n\n    const reducerPlugins = pluginRegistry.getPluginsByType(PLUGIN_TYPES.REDUCER)\n    const reducers = getReducers(reducerPlugins);\n\n    // see: https://github.com/reduxjs/redux-toolkit\n    const store = configureStore(\n        {\n            reducer: combineReducers(reducers),\n            middleware,\n            enhancers: [\n                // enhancements to connect redux to Firebase\n                // pass in the firebase config details\n                reduxFirestore(firebase, {\n                    logListenerError: false,\n                })]\n        },\n    )\n\n    pluginRegistry.setChangeListener(plugins => {\n        const reducers = getReducers(plugins.filter(plugin => plugin.type === PLUGIN_TYPES.REDUCER));\n        store.replaceReducer(combineReducers(reducers));\n    });\n\n    return store;\n}\n\nconst StoreProvider = ({ children }) => {\n\n    const firebase = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config?.firebase\n\n    const store = getStore(firebase)\n\n    // see: https://github.com/prescottprue/react-redux-firebase\n    const reactReduxFirebaseConfig = {\n        firebase, // authentication data\n        createFirestoreInstance, // firestore data\n        config: {\n            userProfile: FIRESTORE_COLLECTIONS.USERS,\n            useFirestoreForProfile: true,\n        },\n        dispatch: store.dispatch,\n    };\n\n    return (\n        <Provider store={store}>\n            <ReactReduxFirebaseProvider {...reactReduxFirebaseConfig}>\n                {children}\n            </ReactReduxFirebaseProvider>\n        </Provider>\n    )\n}\n\nexport { StoreProvider };","\n\nexport const noProductionUrl = `\nProduction URL is not provided in Bowhead configuration. When this app is deployed, users who are signing in will not be correctly verified. Please provide the URL of the deployed application. \n\nSee: https://github.com/daithimorton/bowhead\n\nExample:\n\nconst bowheadConfig = {\n    app: {\n      name: \"Bowhead\",\n      productionUrl: https://your-awesome-app.com\n    },\n    ...\n}\n`\n\nexport const noApiConfiguration = `\nPlease provide a configuration defining the required API endpoints. \n\nSee: https://github.com/daithimorton/bowhead\n    \nExample: \n\nconst bowheadConfig = {\n  api: {\n    deleteStripeCustomer: '/deleteStripeCustomer',\n    createStripeCustomerPortalSession: '/createStripeCustomerPortalSession',\n    createStripeCheckoutSession: '/createStripeCheckoutSession'\n  },\n  ...\n}\n`\n\nexport const noFirebaseInstance = `\nPlease provide an initialised Firebase instance\n\nSee: https://github.com/daithimorton/bowhead\n    \nExample: \n\nconst bowheadConfig = {\n  firebase: firebase,\n  ...\n}\n`\n\nexport const noFirestoreInstance = `\nPlease provide an initialised Firestore instance\n\nSee: https://github.com/daithimorton/bowhead\n    \nExample: \n\nconst bowheadConfig = {\n  firestore: firestore,\n  ...\n}\n`\n\nexport const noStripeConfiguration = `\nPlease provide a configuration defining the required Stripe subscription data. \n\nSee: https://github.com/daithimorton/bowhead\n    \nExample: \n\nconst bowheadConfig = {\n  plans: [\n    {\n      title: \"Basic\",\n      price: \"10\",\n      priceId: process.env.REACT_APP_STRIPE_SUBSCRIPTION_PLAN_BASIC,\n      description: [\n        \"1 Workspace\",\n        \"1 Project/pw\"\n      ],\n      buttonText: \"Get started\",\n      // button variant uses MaterialUI variants \n      // https://material-ui.com/api/button/#props\n      buttonVariant: \"outlined\",\n    },\n    {\n      title: \"Pro\",\n      subheader: \"Most popular\",\n      price: \"50\",\n      priceId: process.env.REACT_APP_STRIPE_SUBSCRIPTION_PLAN_PRO,\n      description: [\n        \"5 Workspaces\",\n        \"5 Projects/pw\"\n      ],\n      buttonText: \"Get started\",\n      buttonVariant: \"contained\",\n    },\n    {\n      title: \"Enterprise\",\n      price: \"250\",\n      priceId: process.env.REACT_APP_STRIPE_SUBSCRIPTION_PLAN_ENTERPRISE,\n      description: [\n        \"25 Workspaces\",\n        \"25 Projects/pw\"\n      ],\n      buttonText: \"Get started\",\n      buttonVariant: \"outlined\",\n    }\n  ]\n  ...\n}\n`","import React from \"react\";\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport { CssBaseline } from \"@material-ui/core\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { AuthenticatedRoute, AuthIsLoaded } from \"./components\";\nimport { SignIn, Verify, Dashboard, LandingPage } from \"./pages\";\nimport { StoreProvider } from './store'\nimport { pluginRegistry, PLUGIN_TYPES } from \"./registry/plugin-registry\";\nimport {\n  noApiConfiguration,\n  noStripeConfiguration,\n  noFirebaseInstance,\n  noFirestoreInstance,\n  noProductionUrl\n} from './utils/error-messages'\n\nconst getRoutes = ({ routes, isAuthRoute }) => {\n  return routes && routes.map((route, index) => {\n    const path = route?.path;\n    let component = route?.component;\n\n    const isValid = path && component;\n    if (!isValid) {\n      console.warn('Please provide path and component in routes configuration.')\n      return null\n    }\n\n    const isLandingPage = path === '/' && !isAuthRoute;\n    const updatedPath = isAuthRoute ? `/dashboard${path}` : path;\n    const Component = route?.component;\n\n    return (\n      <Route\n        key={index}\n        exact\n        path={updatedPath}\n        component={isLandingPage ? () => <LandingPage key={index}><Component /></LandingPage> : component} />\n    )\n  })\n}\n\nconst Bowhead = () => {\n\n  // VERIFY CONFIGURATION\n  let bowheadConfiguration = pluginRegistry.getPluginsByType(PLUGIN_TYPES.CONFIGURATION_BOWHEAD)[0]?.config\n\n  const ConfigurationWalkthrough = () => {\n    return (\n      <div>\n        <h1>Bowhead configuration walkthrough</h1>\n        <p>Before you can start using Bowhead you must provide some required configuration information.</p>\n        {!bowheadConfiguration?.api && (\n          <>\n            <h2>Stipe API endpoint configuration</h2>\n            <p>Bowhead uses the Stripe API to manage user subscription payments. In order for this feature to work you must deploy the following API endpoints and tell Bowhead where these can be accessed</p>\n            <pre>{noApiConfiguration}</pre>\n          </>\n        )}\n\n        {!bowheadConfiguration?.plans && (\n          <>\n            <h2>Stipe subscription plans</h2>\n            <p>Bowhead uses the Stripe API to manage user subscription payments. You must create subscription plans in the Stripe console and provide the details for each plan to Bowhead.</p>\n            <pre>{noStripeConfiguration}</pre>\n          </>\n        )}\n\n        {!bowheadConfiguration?.firebase && (\n          <>\n            <h2>Firebase instance</h2>\n            <p>Bowhead uses the Google Firebase platform to provide user authentication features. You must create a new project in the Firebase console, initialise an instance of Firebase in this project, and pass this instance to Bowhead.</p>\n            <pre>{noFirebaseInstance}</pre>\n          </>\n        )}\n\n        {!bowheadConfiguration?.firestore && (\n          <>\n            <h2>Firebase instance</h2>\n            <p>Bowhead uses the Google Firestore database to provide user profile management features. You must create a new project in the Firebase console, initialise an instance of Firestore in this project, and pass this instance to Bowhead.</p>\n            <pre>{noFirestoreInstance}</pre>\n          </>\n        )}\n\n        {!bowheadConfiguration?.app && (\n          <>\n            <h2>Application name and production URL</h2>\n            <p>Bowhead provides a user verification feature when signing in. In order for this verification step to work you must provide the deployed production URL of this project to Bowhead. You must also set your project name.</p>\n            <pre>{noProductionUrl}</pre>\n          </>\n        )}\n      </div>\n    )\n  }\n\n  let isConfigurationComplete = true;\n  if (!bowheadConfiguration?.api) {\n    console.error(noApiConfiguration)\n    isConfigurationComplete = false;\n  }\n\n  if (!bowheadConfiguration?.plans) {\n    console.error(noStripeConfiguration)\n    isConfigurationComplete = false;\n  }\n\n  const firebaseInstance = bowheadConfiguration?.firebase\n  if (!firebaseInstance) {\n    console.error(noFirebaseInstance)\n    isConfigurationComplete = false;\n  }\n\n  const firestoreInstance = bowheadConfiguration?.firestore\n  if (!firestoreInstance) {\n    console.error(noFirestoreInstance)\n    isConfigurationComplete = false;\n  }\n\n  if (!bowheadConfiguration?.app?.productionUrl) {\n    console.error(noProductionUrl)\n    isConfigurationComplete = false;\n  }\n\n  // CUSTOM ROUTES CONFIGURATION\n  let unAuthenticatedRoutes = pluginRegistry.getPluginsByType(PLUGIN_TYPES.ROUTE_UNAUTHENTICATED)\n  const authenticatedRoutes = pluginRegistry.getPluginsByType(PLUGIN_TYPES.ROUTE_AUTHENTICATED)\n  const themes = pluginRegistry.getPluginsByType(PLUGIN_TYPES.THEME)\n  const theme = themes.length > 0 && themes[0].theme;\n\n  const DefaultLandingPage = () => <div>Default landing page</div>\n  const defaultUnAuthRoutes = [{\n    path: '/',\n    component: DefaultLandingPage\n  }]\n\n  // set default routes\n  if (unAuthenticatedRoutes.length <= 0) unAuthenticatedRoutes = defaultUnAuthRoutes\n\n  const DashboardWrapper = (props) => {\n    return (\n      <Dashboard {...props} >\n        {getRoutes({ routes: authenticatedRoutes, isAuthRoute: true })}\n      </Dashboard>)\n  }\n\n  const defaultTheme = createMuiTheme()\n\n  return (<>\n    {bowheadConfiguration && isConfigurationComplete ?\n      <ThemeProvider\n        theme={theme || defaultTheme}\n      >\n        <StoreProvider>\n          <AuthIsLoaded>\n            <CssBaseline />\n            <BrowserRouter>\n              <Switch>\n                {getRoutes({ routes: unAuthenticatedRoutes })}\n                <Route path=\"/signin\" component={SignIn} />\n                <Route path=\"/verify\" component={Verify} />\n                <AuthenticatedRoute path=\"/dashboard\" component={DashboardWrapper} />\n                <Route component={() => <div>No page found</div>} />\n              </Switch>\n            </BrowserRouter>\n          </AuthIsLoaded>\n        </StoreProvider>\n      </ThemeProvider> : <ConfigurationWalkthrough />\n    }\n  </>\n  );\n};\n\nexport default Bowhead;\n"],"names":["FIRESTORE_COLLECTIONS","USERS","STRIPE","STRIPE_SUBSCRIPTION_STATUS","TRIALING","ACTIVE","CANCELLED","ButtonLoadingSpinner","ButtonBox","children","rest","PageLoadingSpinner","CheckEmail","EmailIcon","fontSize","Details","email","createdAt","lastLoginAt","moment","format","mapStateToProps","state","firebase","auth","connect","useStyles","makeStyles","theme","paper","padding","spacing","marginBottom","button","marginRight","subscriptionStatus","textTransform","PLUGIN_TYPES","ROUTE_UNAUTHENTICATED","ROUTE_AUTHENTICATED","LINK_POPOVER","LINK_SIDEBAR","LINK_LANDING_PAGE_NAV","REDUCER","THEME","LISTENER_FIRESTORE","CONFIGURATION_BOWHEAD","PluginRegistry","plugins","listeners","getPluginsByType","type","Object","values","filter","plugin","register","name","console","error","includes","length","forEach","listener","setChangeListener","push","removeChangeListener","index","indexOf","splice","pluginRegistry","getFirebase","config","getFirestore","firestore","getToken","currentUser","getIdToken","stripe","loadStripe","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","getStripe","getStipeCustomerId","uid","userDataRef","collection","doc","get","userDataDoc","userData","data","stripeCustomerId","deleteStripeCustomer","api","token","fetch","method","body","JSON","stringify","createStripeCustomerPortalSession","customer","then","response","json","createStripeCheckoutSession","priceId","successUrl","cancelUrl","payment_method_types","line_items","price","quantity","mode","success_url","cancel_url","customer_email","client_reference_id","subscription_data","trial_period_days","Billing","planTitle","status","isSubscribed","history","useHistory","useState","isRedirectingToStripeCustomerPortal","setIsRedirectingToStripeCustomerPortal","handleCreateSessionOpenPortal","url","window","location","replace","profile","stripeData","planId","plans","plan","title","useAccount","useSelector","requested","isRequestedStripeCustomer","isLoading","Account","AuthenticatedRoute","isAuthenticated","listItem","color","palette","text","primary","listItemIcon","minWidth","SidebarMenuItem","props","path","menuIcon","items","onClick","handleDrawerToggle","setActiveMenuItem","activeMenuItem","isDefaultOpen","classes","isExpandable","React","open","setOpen","handleClick","Icon","MenuItemRoot","NavLink","backgroundColor","IconExpandMore","IconExpandLess","MenuItemChildren","map","item","CookieNotification","useCookies","cookies","setCookie","cookie_consent","vertical","horizontal","section","alignItems","justifyContent","margin","listStyle","cardPricing","display","Pricing","isRedirecting","setIsRedirecting","app","dashboardUrl","NODE_ENV","productionUrl","handleRedirectToStripe","id","redirectToCheckout","sessionId","log","slice","tier","subheader","align","StarBorder","featureList","line","signOut","sendSignInEmail","urlStr","URL","keys","key","searchParams","append","sendSignInLinkToEmail","href","handleCodeInApp","signInWithEmailLink","isSignInWithEmailLink","verifyUserSignInUpdate","set","merge","updateUserProfile","deleteUserProfile","batch","stripeCustomerDataRef","commit","bowheadSlice","createSlice","initialState","reducers","sendEmailLink","isSendingEmailLink","isEmailLinkSent","sendEmailAuthError","sendEmailLinkSuccess","sendEmailLinkError","action","sendEmailLinkReset","isSigningOut","signOutError","signOutSuccess","verifyUser","isVerifyingUser","isVerifyingUserError","isVerified","verifyUserSuccess","verifyUserError","actions","reducer","dispatch","sendSignInEmailLink","localStorage","setItem","getItem","removeItem","prompt","result","user","appBar","zIndex","drawer","fontWeight","navigation","marginLeft","icon","verticalAlign","breakpoints","down","DashboardNavBar","anchorEl","setAnchorEl","isMenuOpen","Boolean","handleMenuClose","handleMenuOpen","event","currentTarget","menuItemPlugins","unshift","AccountIcon","menuItems","MenuIcon","scrollTo","TimelineIcon","avatar","Menu","disablePadding","ExitToAppIcon","mapDispatchToProps","drawerWidth","toolbar","mixins","drawerPaper","width","background","overflow","DashboardNavSidebar","mobileOpen","sidebarMenuItems","DashboardIcon","menuItem","keepMounted","flexDirection","flexGrow","link","NavBar","drawerOpen","setDrawerOpen","linksConfig","getLinks","labelText","landingPageLinks","AuthIsLoaded","isLoaded","useDashboard","requesting","value","test","setListeners","useEffect","pluginListeners","useFirestoreConnect","sidebar","flex","up","flexShrink","maxWidth","breadcrumbs","LinkRouter","RouterLink","createLinkText","to","capitalize","s","charAt","toUpperCase","paths","split","x","end","Dashboard","match","setMobileOpen","className","pathnames","pathname","last","join","linkText","useSignIn","useDispatch","bowhead","handleSendSignInEmailLink","SignIn","formInput","setFormInput","handleChange","currentState","assign","handleSubmit","e","preventDefault","target","maxLength","Verify","LandingPage","getStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","rfConstants","actionTypes","actionsPrefix","rrfActionTypes","ignoredPaths","getReducers","firestoreReducer","firebaseReducer","reducerPlugins","store","configureStore","combineReducers","enhancers","reduxFirestore","logListenerError","replaceReducer","StoreProvider","reactReduxFirebaseConfig","createFirestoreInstance","userProfile","useFirestoreForProfile","noProductionUrl","noApiConfiguration","noFirebaseInstance","noFirestoreInstance","noStripeConfiguration","getRoutes","routes","isAuthRoute","route","component","isValid","warn","isLandingPage","updatedPath","Component","Bowhead","bowheadConfiguration","ConfigurationWalkthrough","isConfigurationComplete","firebaseInstance","firestoreInstance","unAuthenticatedRoutes","authenticatedRoutes","themes","DefaultLandingPage","defaultUnAuthRoutes","DashboardWrapper","defaultTheme","createMuiTheme"],"mappings":"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"}